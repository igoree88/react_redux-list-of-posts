(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(9),s=n.n(r),c=n(8),a=n(4),o=n(2),u=n(5),i="https://mate.academy/students-api",l=Object(a.b)("users/fetchUsers",function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat(i,"/users"));case 3:if((s=e.sent).ok){e.next=6;break}return e.abrupt("return",r("Server Error!"));case 6:return e.next=8,s.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());function d(e){return e.type.endsWith("rejected")}var b=Object(a.c)({name:"users",initialState:{users:[],selectedUserId:0,loading:!1,error:null},reducers:{getSelectUserId:function(e,t){e.selectedUserId=t.payload}},extraReducers:function(e){e.addCase(l.pending,(function(e){e.loading=!0,e.error=null})).addCase(l.fulfilled,(function(e,t){e.users=t.payload,e.loading=!1})).addMatcher(d,(function(e,t){e.error=t.payload,e.loading=!1}))}}),p=b.actions.getSelectUserId,j=b.reducer,f=Object(a.b)("posts/fetchAllUsersPosts",function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat(i,"/posts"));case 3:if((s=e.sent).ok){e.next=6;break}return e.abrupt("return",r("Server Error!"));case 6:return e.next=8,s.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),m=Object(a.b)("posts/fetchUserPostById",function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat(i,"//posts?userId=").concat(t));case 3:if((s=e.sent).ok){e.next=6;break}return e.abrupt("return",r("Server Error!"));case 6:return e.next=8,s.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(a.b)("postDetails/deletePost",function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat(i,"/comments/").concat(t),{method:"DELETE"});case 3:if(e.sent.ok){e.next=6;break}return e.abrupt("return",r("Can't delete post. Server error."));case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());function O(e){return e.type.endsWith("rejected")}var x=Object(a.c)({name:"posts",initialState:{posts:[],selectedPostId:0,loading:!1,error:null},reducers:{getSelectPostId:function(e,t){e.selectedPostId=t.payload}},extraReducers:function(e){e.addCase(f.pending,(function(e){e.loading=!0,e.error=null})).addCase(f.fulfilled,(function(e,t){e.posts=t.payload,e.loading=!1})).addCase(m.pending,(function(e){e.loading=!0,e.error=null})).addCase(m.fulfilled,(function(e,t){e.posts=t.payload,e.loading=!1})).addCase(h.fulfilled,(function(e,t){e.posts=e.posts.filter((function(e){return e.id!==t.payload}))})).addMatcher(O,(function(e,t){e.error=t.payload,e.loading=!1}))}}),v=x.actions.getSelectPostId,y=x.reducer,_=Object(a.b)("postDetails/fetchPostDetailsByPostId",function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat(i,"/posts/").concat(t));case 3:if((s=e.sent).ok){e.next=6;break}return e.abrupt("return",r("Server Error!"));case 6:return e.next=8,s.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(a.b)("postDetails/fetchComentsByPostId",function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat(i,"/comments?postId=").concat(t));case 3:if((s=e.sent).ok){e.next=6;break}return e.abrupt("return",r("Server Error!"));case 6:return e.next=8,s.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),N=Object(a.b)("postDetails/deletePostComments",function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat(i,"/comments/").concat(t),{method:"DELETE"});case 3:if(e.sent.ok){e.next=6;break}return e.abrupt("return",r("Can't delete task. Server error."));case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),P=Object(a.b)("todos/addNewTodo",function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){var r,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.next=3,fetch("".concat(i,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if((s=e.sent).ok){e.next=6;break}return e.abrupt("return",r("Can't add task. Server error."));case 6:return e.next=8,s.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());function k(e){return e.type.endsWith("rejected")}var C=Object(a.c)({name:"postDetails",initialState:{commentsOfPost:[],postDetails:null,loading:!1,error:null},reducers:{},extraReducers:function(e){e.addCase(_.pending,(function(e){e.loading=!0,e.error=null})).addCase(_.fulfilled,(function(e,t){e.postDetails=t.payload,e.loading=!1})).addCase(g.pending,(function(e){e.loading=!0,e.error=null})).addCase(g.fulfilled,(function(e,t){e.commentsOfPost=t.payload,e.loading=!1})).addCase(N.fulfilled,(function(e,t){e.commentsOfPost=e.commentsOfPost.filter((function(e){return e.id!==t.payload}))})).addMatcher(k,(function(e,t){e.error=t.payload,e.loading=!1}))}}).reducer,w=Object(a.a)({reducer:{users:j,posts:y,postDetails:C}}),S=n(1),D=n.n(S),I=(n(23),n(24),function(){return Object(c.b)()}),E=c.c,U=(n(25),n(0)),W=function(){var e=I(),t=E((function(e){return e.users.selectedUserId}));Object(S.useEffect)((function(){e(t?m(t):f())}),[t]);var n=E((function(e){return e.posts.posts})),r=E((function(e){return e.posts.selectedPostId}));return Object(U.jsxs)("div",{className:"PostsList",children:[Object(U.jsx)("h2",{children:"Posts:"}),Object(U.jsx)("ul",{className:"PostsList__list",children:n&&n.map((function(t){return Object(U.jsxs)("li",{className:"PostsList__item",children:[Object(U.jsx)("div",{children:Object(U.jsx)("b",{children:"User #".concat(t.userId,": ").concat(t.title)})}),Object(U.jsxs)("div",{children:[r===t.id?Object(U.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){e(v(0))},children:"Close"}):Object(U.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){e(v(t.id))},children:"Open"}),Object(U.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){e(h(t.id))},children:"\u0445"})]})]},t.id)}))})]})},A=n(7),L=(n(27),function(){var e=Object(S.useState)(""),t=Object(A.a)(e,2),n=t[0],r=t[1],s=Object(S.useState)(""),c=Object(A.a)(s,2),a=c[0],i=c[1],l=Object(S.useState)(""),d=Object(A.a)(l,2),b=d[0],p=d[1],j=E((function(e){return e.posts.selectedPostId})),f=I(),m=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),f(P({postId:j,name:n,email:a,body:b})),f(g(j)),r(""),i(""),p("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("form",{className:"NewCommentForm",onSubmit:m,children:[Object(U.jsx)("div",{className:"form-field",children:Object(U.jsx)("input",{type:"text",name:"name",value:n,onChange:function(e){r(e.target.value)},placeholder:"Your name",className:"NewCommentForm__input"})}),Object(U.jsx)("div",{className:"form-field",children:Object(U.jsx)("input",{type:"text",name:"email",value:a,onChange:function(e){i(e.target.value)},placeholder:"Your email",className:"NewCommentForm__input"})}),Object(U.jsx)("div",{className:"form-field",children:Object(U.jsx)("textarea",{name:"body",value:b,onChange:function(e){p(e.target.value)},placeholder:"Type comment here",className:"NewCommentForm__input"})}),Object(U.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),V=(n(28),function(){var e=Object(S.useState)(!0),t=Object(A.a)(e,2),n=t[0],r=t[1],s=I(),c=E((function(e){return e.posts.selectedPostId})),a=E((function(e){return e.postDetails.postDetails})),o=E((function(e){return e.postDetails.commentsOfPost}));return Object(S.useEffect)((function(){c&&(s(g(c)),s(_(c)))}),[c]),Object(U.jsx)(U.Fragment,{children:c?Object(U.jsxs)("div",{className:"PostDetails",children:[Object(U.jsx)("h2",{children:"Post details:"}),Object(U.jsx)("section",{className:"PostDetails__post",children:Object(U.jsx)("p",{children:null===a||void 0===a?void 0:a.body})}),Object(U.jsxs)("section",{className:"PostDetails__comments",children:[n?Object(U.jsx)("button",{type:"button",className:"button",onClick:function(){r(!1)},children:"Hide comments"}):Object(U.jsx)("button",{type:"button",className:"button",onClick:function(){r(!0)},children:"Show comments"}),n&&(null===o||void 0===o?void 0:o.map((function(e){return Object(U.jsx)("ul",{className:"PostDetails__list",children:Object(U.jsxs)("li",{className:"PostDetails__list-item",children:[Object(U.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){s(N(e.id))},children:"X"}),Object(U.jsx)("p",{children:e.body})]})},e.id)})))]}),Object(U.jsx)("section",{children:Object(U.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(U.jsx)(L,{})})})]}):Object(U.jsxs)("div",{children:[Object(U.jsx)("p",{children:"Please press the open button to display"}),Object(U.jsx)("p",{children:"more detailed information about the post"})]})})}),F=function(){var e=I();Object(S.useEffect)((function(){e(l())}),[]);var t=E((function(e){return e.users.users})),n=E((function(e){return e.users.selectedUserId}));return Object(U.jsxs)("label",{children:["Select a user: \xa0",Object(U.jsxs)("select",{className:"App__user-selector",name:"selectedUserId",value:n,onChange:function(t){var n=+t.target.value;e(p(n))},children:[Object(U.jsx)("option",{value:0,children:"All users"}),t&&t.map((function(e){return Object(U.jsx)(D.a.Fragment,{children:Object(U.jsx)("option",{value:e.id,children:e.name})},e.id)}))]})]})},T=function(){return Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)("header",{className:"App__header",children:Object(U.jsx)(F,{})}),Object(U.jsxs)("main",{className:"App__main",children:[Object(U.jsx)("div",{className:"App__sidebar",children:Object(U.jsx)(W,{})}),Object(U.jsx)("div",{className:"App__content",children:Object(U.jsx)(V,{})})]})]})};s.a.render(Object(U.jsx)(c.a,{store:w,children:Object(U.jsx)(T,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.52555962.chunk.js.map